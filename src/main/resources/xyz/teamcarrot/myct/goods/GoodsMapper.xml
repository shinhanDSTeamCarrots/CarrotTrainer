<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="xyz.teamcarrot.myct.goods.GoodsMapper">
	
	<!-- 전체 상품 리스트 -->
	<select id="list" resultType="xyz.teamcarrot.myct.goods.GoodsVO">
		SELECT * FROM tb_goods
	</select>
	
	<!-- 카테고리 이름 가져오기 -->
	<select id="category" parameterType="int" resultType="string">
		SELECT category_name FROM tb_goods_category
	</select>
	
	<!-- 카테고리별 상품 리스트 -->
	<select id="getCategoryGoodsList" parameterType="int" resultType="xyz.teamcarrot.myct.goods.GoodsVO">
		SELECT g.* ,c.*
		FROM tb_goods g
		INNER JOIN tb_goods_category c ON g.category_no=c.category_no
		WHERE g.category_no=#{category_no}
	</select>
	
	<!-- 상품상세 리스트 -->
	<select id="detail" resultType="xyz.teamcarrot.myct.goods.GoodsVO">
		SELECT g.*, c.category_name
		FROM tb_goods g
		INNER JOIN tb_goods_category c ON g.category_no=c.category_no
		WHERE g.goods_no=#{goods_no}
	</select>
	
	<select id="goodsOption" resultType="xyz.teamcarrot.myct.goods.GoodsOptionVO" parameterType="int">
		SELECT O.option_no
			 , O.option_name
			 , O.price_updown
			 , G.price + O.price_updown AS final_price
		FROM tb_goods_option AS O
		INNER JOIN tb_goods AS G
			ON G.goods_no = O.goods_no
		WHERE O.goods_no=#{goods_no}
	</select>
	
	
</mapper>