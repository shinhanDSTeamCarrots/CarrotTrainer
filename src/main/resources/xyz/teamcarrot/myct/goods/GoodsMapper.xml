<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="xyz.teamcarrot.myct.goods.GoodsMapper">
	
	<!-- 전체 상품 리스트 -->
	<select id="list" resultType="xyz.teamcarrot.myct.goods.GoodsVO">
		SELECT * FROM tb_goods
	</select>
	
	<!-- 카테고리 이름 가져오기 -->
	<select id="category" parameterType="int" resultType="string">
		SELECT category_name FROM tb_goods_category
	</select>
	
	<!-- 카테고리별 상품 리스트 -->
	<select id="getCategoryGoodsList" parameterType="int" resultType="xyz.teamcarrot.myct.goods.GoodsVO">
		SELECT g.* ,c.category_name
		FROM tb_goods g
		INNER JOIN tb_goods_category c ON g.category_no=c.category_no
		WHERE g.category_no=#{category_no}
	</select>
	
	<!-- 상품상세 리스트 -->
	<select id="detailList" resultType="xyz.teamcarrot.myct.goods.GoodsVO">
		SELECT g.*, o.option_name, o.price_updown, (g.price+o.price_updown) AS final_price 
		FROM tb_goods g
		INNER JOIN tb_goods_option o ON g.goods_no = o.goods_no
	</select>
	
	
</mapper>